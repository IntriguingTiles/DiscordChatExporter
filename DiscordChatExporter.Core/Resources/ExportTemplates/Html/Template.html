<!DOCTYPE html>
<html lang="en">

<head>
    <title>{{ Guild.Name }} - {{ Channel.Name }}</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <style></style>
</head>
<body>
    
{{~ # Info }}
<div id="info">
    <div class="info-left">
        <img class="guild-icon" src="{{ Guild.IconUrl }}" />
    </div>
    <div class="info-right">
        <div class="guild-name">{{ Guild.Name }}</div>
        <div class="channel-name">{{ Channel.Name }}</div>
        <div class="channel-topic">{{ Channel.Topic }}</div>
        <div class="channel-messagecount">{{ TotalMessageCount | math.format "N0" }} messages</div>
    </div>
</div>

{{~ # Log }}
<div id="log">
    {{ for group in MessageGroups }}
        <div class="msg">
            {{~ # Avatar }}
            <div class="msg-left">
                <img class="msg-avatar" src="{{ group.Author.AvatarUrl }}" />
            </div>
            {{~ # Author name and timestamp }}
            <div class="msg-right">
                <span class="msg-user" title="{{ group.Author.FullName }}">{{ group.Author.Name }}</span>
                <span class="msg-date">{{ group.TimeStamp | FormatDateTime }}</span>

                {{~ # Messages }}
                {{ for message in group.Messages }}
                    {{~ # Content }}
                    {{ if message.Content != empty }}
                        <div class="msg-content">
                            {{ message | FormatMessageContent }}

                            {{~ # Edited timestamp }}
                            {{ if message.EditedTimeStamp != empty }}
                                <span class="msg-edited" title="{{ message.EditedTimeStamp }}">(edited)</span>
                            {{ end }}
                        </div>
                    {{ end }}

                    {{~ # Attachments }}
                    {{ for attachment in message.Attachments }}
                        <div class="msg-attachment">
                            <a href="{{ attachment.Url }}">
                                {{~ # Image }}
                                {{ if attachment.IsImage }}
                                    <img class="msg-attachment" src="{{ attachment.Url }}" />
                                {{~ # Non-image }}
                                {{ else }}
                                    Attachment: {{ attachment.FileName }} ({{ attachment.FileSize | FormatFileSize }})
                                {{ end }}
                            </a>
                        </div>
                    {{ end }}

                    {{~ # Embeds }}
                    {{ for embed in message.Embeds }}
                        <div class="accessory">
                            <div class='embed-color-pill' style='background-color: rgba({{ embed.Color | FormatColor }})'></div>
                            <div class="embed-wrapper">
                                <div class="embed embed-rich">
                                    <div class="embed embed-content">
                                        <div class="embed embed-content-inner">
                                            {{~ # Author }}
                                            {{ if embed.Author != empty }}
                                                <div class="embed-author">
                                                    {{ if embed.Author.IconUrl != empty }}
                                                        <img class="embed-author-icon" src="{{ embed.Author.IconUrl }}" role="presentation" />
                                                    {{ end }}
                                                    {{ if embed.Author.Name != empty }}
                                                        {{ if embed.Author.Url != empty }}
                                                            <a class="embed-author-name" target="_blank" rel="noreferrer" href="{{ embed.Author.Url }}">{{ embed.Author.Name }}</a>
                                                        {{ else }}
                                                            <span class="embed-author-name">{{ embed.Author.Name }}</span>
                                                        {{ end }}
                                                    {{ end }}
                                                </div>
                                            {{ end }}

                                            {{~ # Title }}
                                            {{ if embed.Title != empty }}
                                                {{ if embed.Url != empty }}
                                                    <a class="embed-title" target="_blank" rel="noreferrer" href="{{ embed.Url }}">{{ embed.Title | FormatMarkdown }}</a>
                                                {{ else }}
                                                    <div class="embed-title">{{ embed.Title | FormatMarkdown }}</div>
                                                {{ end }}
                                            {{ end }}

                                            {{~ # Description }}
                                            {{ if embed.Content != empty }}
                                                <div class="embed-description markup">{{ embed.Content | FormatMarkdown }}</div>
                                            {{ end }}

                                            {{~ # Fields }}
                                            <div class="embed-fields">
                                                
                                            </div>
                                        </div>
                                    </div>    
                                </div>
                            </div>
                        </div>
                    {{ end }}
                {{ end }}
            </div>
        </div>
    {{ end }}
</div>

</body>
</html>